<!-- 历史记录功能测试页面 -->
<view class="test-page">
  <view class="test-header">
    <text class="test-title">历史记录功能测试</text>
    <text class="test-subtitle">验证历史记录页面的各项功能</text>
  </view>

  <!-- 测试状态 -->
  <view class="test-status" wx:if="{{testing}}">
    <van-loading size="24px" />
    <text class="status-text">正在运行测试...</text>
  </view>

  <!-- 测试结果 -->
  <view class="test-results" wx:if="{{!testing && testResults.length > 0}}">
    <view class="result-header">
      <text class="result-title">测试结果</text>
      <text class="result-summary">
        通过: {{passedCount}} / {{testResults.length}}
      </text>
    </view>

    <view class="result-list">
      <view
        class="result-item {{item.status === 'PASS' ? 'pass' : 'fail'}}"
        wx:for="{{testResults}}"
        wx:key="name"
      >
        <view class="result-info">
          <text class="result-name">{{item.name}}</text>
          <text class="result-message">{{item.message}}</text>
        </view>
        <van-icon
          name="{{item.status === 'PASS' ? 'success' : 'close'}}"
          color="{{item.status === 'PASS' ? '#52c41a' : '#ff4d4f'}}"
          size="20px"
        />
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="test-actions">
    <van-button
      type="primary"
      size="large"
      bind:click="onRetryTests"
      loading="{{testing}}"
      disabled="{{testing}}"
    >
      {{testing ? '测试中...' : '重新测试'}}
    </van-button>

    <van-button
      type="default"
      size="large"
      bind:click="onGoToHistory"
      disabled="{{testing}}"
    >
      查看历史记录页面
    </van-button>
  </view>
</view>