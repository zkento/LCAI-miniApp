# 良策AI分析平台 - 需求总结

本文档旨在全面梳理"良策AI分析平台"Web项目的功能和非功能性需求，为后续将其完整移植到微信小程序提供清晰的需求基准。

## 1. 项目愿景与目标

良策AI分析平台的核心目标是利用大型语言模型（以DeepSeek为代表）的分析能力，为用户提供专业、高效、智能的分析服务，帮助用户理解复杂的报告，并基于个人或企业情况获取定制化的建议。

## 2. 核心用户与场景

*   **核心用户**:
    *   需要解读个人征信报告的个人用户。
    *   需要评估企业信用状况的金融从业者、企业主。
    *   寻求专业购房建议的潜在购房者。
    *   需要规划融资方案的企业或个人。
*   **核心场景**:
    *   用户手持PDF或图片格式的征信报告，希望快速获得专业的解读和信用优化建议。
    *   用户面临房产购买或融资决策，希望获得AI驱动的、数据化的决策辅助。

## 3. 功能性需求

### 3.1. 主页/仪表盘

*   **FR-1.1**: 应用需有一个主页，作为所有核心功能的统一入口。
*   **FR-1.2**: 主页需以卡片或列表形式，清晰展示以下四个核心功能模块的入口：
    *   个人征信分析
    *   企业征信分析
    *   融资顾问报告
    *   买家顾问报告
*   **FR-1.3**: 每个功能入口需包含清晰的标题和简要的功能描述。
*   **FR-1.4**: 用户点击功能入口后，应能平滑地跳转到对应的功能页面。
*   **FR-1.5**: 应用需要提供一个全局的AI聊天功能入口（例如，在顶部导航栏的用户头像菜单中），用户在任何主页面都可以随时唤起AI聊天窗口进行对话。

### 3.2. 核心分析模块 (征信分析、融资建议、房产建议的统一流程)

这是一个标准化的四步流程，适用于所有核心分析功能。

*   **FR-2.1: 步骤一 - 信息输入与文件上传**
    *   **FR-2.1.1**: 提供一个表单，允许用户上传文件（个人/企业征信）或输入文本描述（融资/房产需求）。
    *   **FR-2.1.2**: 对于**征信分析类**功能，文件上传需支持 `.pdf` 和常见的图片格式（`.jpg`, `.png`, `.jpeg`）。
        *   PDF和图片上传应为**互斥操作**，一次任务只能选择一种类型。
        *   应有明确的文件大小和数量限制（如PDF单个，图片最多100张）。
        *   **关键交互**: 在上传多张图片后，用户应能够**通过拖拽的方式调整图片的顺序**，以确保报告页码的正确性。
    *   **FR-2.1.3**: 对于**顾问报告类**（融资/房产）功能，提供一个富文本输入框供用户详细描述需求。
        *   系统应在旁边提供**描述建议和参考范例**，引导用户输入高质量信息。
        *   提供**客户姓名、业务城市**等结构化输入字段。
    *   **FR-2.1.4 (关键需求)**: 顾问报告类功能支持一个**两阶段提交**流程：
        1.  **AI预分析**: 用户输入文本描述后，可触发"AI分析需求"，由AI预先提取文本中的关键词。
        2.  **确认提交**: 用户在AI预分析结果的基础上，进行最终的报告生成提交。
    *   **FR-2.1.5 (关键需求)**: 顾问报告类功能允许用户**关联历史上已分析过的征信报告**，将征信结果与本次需求一并提交给AI，以获得更精准的建议。
    *   **FR-2.1.6**: 提交后，系统进入下一步，并锁定表单，防止重复提交。

*   **FR-2.2: 步骤二 - 内容处理与提取**
    *   **FR-2.2.1**: 系统后台需能从上传的PDF或图片文件中准确提取全部文字内容。
    *   **FR-2.2.2**: 界面需向用户展示内容提取正在进行中，并提供进度反馈（例如：加载动画、进度条、已耗时等）。
    *   **FR-2.2.3 (可选)**: 可在界面上分栏展示原始文件预览和提取出的文本内容，增强透明度。

*   **FR-2.3: 步骤三 - AI思考过程展示**
    *   **FR-2.3.1**: 将提取的文本/用户输入的需求发送给AI后，界面需实时、流式地展示AI的"思考过程"或"分析步骤"。
    *   **FR-2.3.2**: 思考过程展示应清晰、易读，让用户了解AI正在做什么，建立信任感。
    *   **FR-2.3.3**: 在AI思考期间，应有明显的加载或等待提示（例如：AI正在深度思考中...）。
    *   **FR-2.3.4**: 思考过程结束后，自动过渡到报告生成阶段，并给出相应提示。

*   **FR-2.4: 步骤四 - 报告生成与交互式咨询**
    *   **FR-2.4.1**: 最终的分析报告需以结构化、易于阅读的格式（如Markdown）呈现。
    *   **FR-2.4.2**: 报告页面需要提供以下操作：
        *   **下载报告**: 将分析报告保存为PDF或Markdown文件。
        *   **查看原文**: 允许用户随时回看上传的原始文件。
        *   **开始新任务**: 方便用户返回首页或清空当前状态，开始一次新的分析。
    *   **FR-2.4.3**: 在报告旁边，需要提供一个交互式的聊天/咨询窗口。
    *   **FR-2.4.4**: 用户可以在咨询窗口中，基于当前报告内容，向AI进行追问。
    *   **FR-2.4.5**: AI的回复也应是流式返回，并显示在聊天记录中。
    *   **FR-2.4.6 (可选)**: 在报告页面的某个区域，完整展示本次分析的"AI深度思考全过程记录"，供用户复盘。

## 4. 非功能性需求

*   **NFR-1 (性能)**: 页面加载速度要快，特别是小程序环境。文件上传、文本提取、AI响应的时间应尽可能缩短，并在等待期间提供明确的反馈。
*   **NFR-2 (用户体验)**: 界面设计应简洁、直观，符合微信小程序的设计规范。所有交互（点击、等待、加载）都应有即时反馈。
*   **NFR-3 (可靠性)**: 后端服务应稳定，能处理常见的错误情况（如文件格式错误、AI接口超时、网络问题），并向前端返回可理解的错误信息。
*   **NFR-4 (安全性)**: 用户上传的征信报告等敏感数据，在处理后应及时从服务器删除，不应永久保存。与AI的通信需要加密。
*   **NFR-5 (可维护性)**: 代码应采用组件化、模块化的方式组织，逻辑清晰，注释充分，便于未来迭代和维护。 